# Cursor AI 효과적인 프롬프트 모음
> ⚠️ 본 문서에서 언급된 Cursor AI 및 Codex CLI 관련 내용은 Cursor AI 및 Codex CLI가 담당하는 것으로 변경되었습니다.

## 1. 개요

이 문서는 팔란티어 파운드리 프로젝트에서 Cursor AI 사용 시 효과적인 프롬프트 패턴과 예시를 제공합니다. 적절한 프롬프트를 사용하면 AI 코드 생성 품질을 크게 향상시킬 수 있으며, 개발 생산성을 높일 수 있습니다.

## 2. Cursor AI 명령어 기본

### 2.1 주요 명령어
- `/chat`: AI와 대화창 열기
- `/generate`: 코드 생성 요청
- `/edit`: 코드 수정 요청
- `/explain`: 코드 설명 요청
- `/fix`: 오류 수정 요청
- `/test`: 테스트 코드 생성 요청
- `/docs`: 문서화 요청

### 2.2 명령어 사용 팁
- 특정 코드 블록을 선택한 후 명령어를 사용하면 컨텍스트가 명확해집니다.
- 여러 파일을 동시에 참조해야 할 경우, 파일 경로를 명시적으로 언급하세요.
- 복잡한 요청은 여러 단계로 나누어 진행하는 것이 효과적입니다.
- 기존 코드 패턴이나 스타일을 참조할 수 있는 예시를 함께 제공하세요.

## 3. 온톨로지 관리 시스템 관련 프롬프트

### 3.1 Neo4j 연결 및 CRUD 작업

#### 기본 연결 및 세션 관리
```
/generate Neo4j 데이터베이스에 연결하고 세션을 관리하는 클래스를 작성해줘. 
클래스는 다음 요구사항을 충족해야 해:
1. YAML 구성 파일에서 연결 정보를 로드
2. 연결 풀 관리 및 세션 생성
3. 트랜잭션 지원
4. 오류 처리 및 로깅
5. 컨텍스트 관리자(with 문) 지원
```

#### 노드 및 관계 생성
```
/generate Neo4j 그래프에 새로운 노드와 관계를 생성하는 함수를 작성해줘.
함수 요구사항:
1. 노드 레이블과 속성을 매개변수로 받음
2. 두 노드 간의 관계 유형과 속성을 매개변수로 받음
3. 트랜잭션 내에서 작업 수행
4. 동일한 노드가 이미 존재하는 경우 처리
5. 생성된 노드 및 관계 ID 반환
6. 오류 처리 및 로깅
```

#### 온톨로지 쿼리
```
/generate 온톨로지에서 특정 조건을 만족하는 경로를 찾는 함수를 작성해줘.
함수 요구사항:
1. 시작 노드와 끝 노드 ID 또는 속성을 매개변수로 받음
2. 관계 유형 및 깊이 제한을 매개변수로 받음
3. 결과를 경로 객체 목록으로 반환
4. 각 경로의 노드와 관계에 대한 모든 속성 포함
5. 결과가 없는 경우 처리
6. 효율적인 쿼리 작성 (APOC 라이브러리 활용 가능)
```

### 3.2 온톨로지 관리 클래스

#### 온톨로지 관리자 클래스
```
/generate 온톨로지 관리를 위한 OntologyManager 클래스를 작성해줘.
클래스는 다음 기능을 포함해야 해:
1. 객체 타입 및 관계 정의 관리
2. 새로운 객체 및 관계 인스턴스 생성
3. 온톨로지 검색 및 쿼리
4. 온톨로지 가져오기/내보내기(JSON 형식)
5. 온톨로지 시각화 데이터 생성
```

#### 온톨로지 스키마 검증
```
/generate 온톨로지 스키마를 검증하는 함수를 작성해줘.
함수 요구사항:
1. JSON 형식의 스키마 정의를 입력으로 받음
2. 다음 항목 검증:
   - 객체 타입 정의의 유효성
   - 속성 정의의 유효성(타입, 필수 여부 등)
   - 관계 정의의 유효성(소스 및 대상 타입 등)
3. 검증 오류 목록 반환
4. 스키마 예시 제공 기능
```

## 4. OneDrive 통합 관련 프롬프트

### 4.1 OneDrive 연결 및 인증

#### OneDrive 인증 클래스
```
/generate O365 라이브러리를 사용하여 OneDrive 연결 및 인증을 처리하는 인증 클래스를 작성해줘.
요구사항:
1. YAML 구성 파일에서 클라이언트 ID, 테넌트 ID 등의 정보를 로드
2. OAuth 인증 흐름 관리
3. 액세스 토큰 캐싱 및 갱신
4. 인증 상태 관리 및 검증
5. 오류 처리 및 로깅
```

#### 파일 및 폴더 작업
```
/generate OneDrive의 파일 및 폴더를 관리하는 클래스를 작성해줘.
클래스는 다음 메서드를 포함해야 해:
1. 폴더 내용 나열
2. 파일 및 폴더 메타데이터 조회
3. 파일 다운로드 및 업로드
4. 파일 및 폴더 생성, 삭제, 이동
5. 변경 사항 추적
6. 대용량 파일 처리 (청크 업로드/다운로드)
```

### 4.2 문서 처리 관련

#### 문서 처리 전략 패턴
```
/generate 다양한 문서 형식을 처리하기 위한 전략 패턴을 구현해줘.
요구사항:
1. DocumentHandler 인터페이스/추상 클래스 정의
2. 다음 구체적인 핸들러 구현:
   - WordDocumentHandler
   - ExcelDocumentHandler
   - PowerPointDocumentHandler
   - PDFDocumentHandler
   - TextDocumentHandler
3. 각 핸들러는 다음 메서드를 구현해야 함:
   - extract_text(): 텍스트 내용 추출
   - extract_metadata(): 메타데이터 추출
   - analyze_structure(): 문서 구조 분석
4. 핸들러 팩토리 메서드 구현
```

#### Excel 데이터 처리
```
/generate Excel 파일에서 데이터를 처리하는 클래스를 작성해줘.
요구사항:
1. pandas와 openpyxl 사용
2. 시트 목록 조회 기능
3. 특정 시트의 데이터를 DataFrame으로 변환
4. 헤더 자동 감지 및 데이터 타입 추론
5. 대용량 파일 처리를 위한 청크 단위 처리
6. 피벗 테이블 및 차트 데이터 추출
7. 필터링 및 정렬 기능
```

## 5. 데이터 파이프라인 관련 프롬프트

### 5.1 Airflow DAG 생성

#### 문서 처리 파이프라인
```
/generate Apache Airflow를 사용하여 OneDrive 문서 처리 파이프라인을 구현해줘.
파이프라인 요구사항:
1. 매일 자정에 실행
2. 다음 작업을 순차적으로 수행:
   - OneDrive에서 새로운/변경된 문서 감지
   - 문서 다운로드 및 캐싱
   - 문서 처리 및 텍스트 추출
   - 메타데이터 추출
   - 온톨로지 업데이트
   - 임베딩 생성 및 벡터 저장소 업데이트
3. 각 작업에 대한 오류 처리 및 재시도 메커니즘
4. 파이프라인 실행 결과 보고
```

#### 데이터 품질 파이프라인
```
/generate Great Expectations를 사용하여 데이터 품질 검증 파이프라인을 구현해줘.
파이프라인 요구사항:
1. 일주일에 한 번 실행
2. 다음 작업을 수행:
   - 품질 검증 구성 파일 로드
   - 대상 데이터 소스 연결
   - 품질 기대치 적용 및 검증
   - 검증 결과 보고서 생성
   - 실패한 검증에 대한 알림 발송
3. 동적으로 검증 대상 및 규칙 변경 가능
4. 검증 결과 히스토리 관리
```

### 5.2 파이프라인 유틸리티

#### 증분 처리 유틸리티
```
/generate 데이터 파이프라인에서 증분 처리를 위한 유틸리티를 구현해줘.
요구사항:
1. 마지막 실행 시간 추적 메커니즘
2. 변경된 레코드 식별 함수
3. 상태 관리 및 복구 기능
4. 다음 증분 유형 지원:
   - 타임스탬프 기반 증분
   - ID 기반 증분
   - 체크섬 기반 증분
5. 병렬 처리 지원
```

#### 파이프라인 모니터링
```
/generate Airflow 파이프라인 모니터링을 위한 유틸리티를 구현해줘.
요구사항:
1. 작업 실행 시간 및 상태 추적
2. 리소스 사용량 모니터링 (메모리, CPU)
3. 오류 감지 및 알림
4. 성능 통계 수집 및 보고
5. 임계값 기반 알림 설정
6. 대시보드 데이터 생성
```

## 6. RAG 시스템 관련 프롬프트

### 6.1 임베딩 생성

#### 문서 임베딩 생성기
```
/generate 문서 임베딩을 생성하는 클래스를 구현해줘.
요구사항:
1. sentence-transformers 라이브러리 사용
2. 다양한 사전 훈련 모델 지원 (e.g., all-MiniLM-L6-v2)
3. 문서 청크 분할 기능
4. 배치 처리 지원
5. 캐싱 메커니즘
6. GPU 가속 지원 (가능한 경우)
7. 임베딩 정규화 및 후처리
```

#### 문서 청크 분할 전략
```
/generate 문서를 의미 있는 청크로 분할하는 전략을 구현해줘.
요구사항:
1. 다음 분할 전략 지원:
   - 고정 크기 분할
   - 문단 기반 분할
   - 의미 기반 분할 (문장 임베딩 활용)
2. 청크 크기 및 겹침 구성 가능
3. 문서 구조 보존 (제목, 문단 등)
4. HTML, 마크다운 등의 서식 처리
5. 언어 감지 및 다국어 지원
```

### 6.2 벡터 저장소 및 검색

#### ChromaDB 벡터 저장소
```
/generate ChromaDB를 사용하여 벡터 저장소를 구현해줘.
요구사항:
1. 컬렉션 생성 및 관리
2. 문서 임베딩 저장 및 메타데이터 관리
3. 유사도 검색 기능 (코사인, 유클리드, 내적)
4. 필터링 및 조건부 검색
5. 벡터 저장소 백업 및 복원
6. 대용량 데이터 처리 최적화
```

#### 시맨틱 검색 엔진
```
/generate RAG 시스템을 위한 시맨틱 검색 엔진을 구현해줘.
요구사항:
1. 쿼리 임베딩 생성
2. 하이브리드 검색 지원 (벡터 + 키워드)
3. 검색 결과 재랭킹
4. 다양한 검색 알고리즘 지원
5. 검색 컨텍스트 구성 및 최적화
6. 검색 결과 설명 가능성
7. 사용자 피드백 기반 검색 개선
```

## 7. 웹 대시보드 관련 프롬프트

### 7.1 Dash 컴포넌트

#### 온톨로지 시각화 컴포넌트
```
/generate Dash와 Plotly를 사용하여 온톨로지 네트워크 시각화 컴포넌트를 구현해줘.
요구사항:
1. Neo4j 그래프 데이터를 시각화
2. 노드 및 엣지 스타일 커스터마이징
3. 상호작용 기능 (확대/축소, 드래그, 클릭)
4. 노드 필터링 및 하이라이팅
5. 노드 세부 정보 표시 패널
6. 레이아웃 알고리즘 선택 옵션
7. 대용량 그래프 처리 최적화
```

#### 문서 브라우저 컴포넌트
```
/generate 문서 브라우징 및 검색을 위한 Dash 컴포넌트를 구현해줘.
요구사항:
1. 문서 목록 표시 및 정렬
2. 메타데이터 기반 필터링
3. 전체 텍스트 검색 기능
4. 문서 미리보기
5. 문서 간 관계 시각화
6. 태그 및 카테고리 관리
7. 페이지네이션 및 무한 스크롤
```

### 7.2 대시보드 레이아웃

#### 대시보드 메인 레이아웃
```
/generate Dash를 사용하여 팔란티어 파운드리 대시보드의 메인 레이아웃을 구현해줘.
요구사항:
1. 반응형 디자인
2. 다음 구성 요소 포함:
   - 상단 네비게이션 바
   - 사이드바 메뉴
   - 메인 콘텐츠 영역
   - 푸터
3. 다크/라이트 테마 지원
4. 사용자 인증 상태 표시
5. 알림 및 메시지 영역
6. 모바일 최적화
```

#### 데이터 품질 대시보드
```
/generate 데이터 품질 모니터링을 위한 Dash 대시보드를 구현해줘.
요구사항:
1. 품질 메트릭 요약 카드
2. 시간에 따른 품질 점수 추세 차트
3. 실패한 검증 목록 및 세부 정보
4. 데이터 소스별 품질 비교
5. 드릴다운 기능
6. 알림 설정 관리
7. 보고서 내보내기 기능
```

## 8. API 시스템 관련 프롬프트

### 8.1 FastAPI 엔드포인트

#### 온톨로지 API
```
/generate FastAPI를 사용하여 온톨로지 관리 API를 구현해줘.
요구사항:
1. 다음 엔드포인트 포함:
   - 객체 타입 관리 (GET, POST, PUT, DELETE)
   - 객체 인스턴스 관리 (GET, POST, PUT, DELETE)
   - 관계 관리 (GET, POST, PUT, DELETE)
   - 온톨로지 검색 및 쿼리
2. Pydantic 모델 정의
3. 입력 유효성 검사
4. 권한 및 인증 통합
5. API 문서화 (Swagger/ReDoc)
6. 오류 처리 및 응답 형식 표준화
```

#### 문서 관리 API
```
/generate FastAPI를 사용하여 문서 관리 API를 구현해줘.
요구사항:
1. 다음 엔드포인트 포함:
   - 문서 목록 조회
   - 문서 세부 정보 조회
   - 문서 검색 (메타데이터 및 전체 텍스트)
   - 문서 처리 상태 조회 및 업데이트
2. 필터링 및 정렬 옵션
3. 페이지네이션 지원
4. 문서 형식별 처리 커스터마이징
5. 배치 작업 지원
6. 비동기 작업 관리
```

### 8.2 API 미들웨어 및 유틸리티

#### API 인증 미들웨어
```
/generate FastAPI API 인증 미들웨어를 구현해줘.
요구사항:
1. JWT 기반 인증
2. API 키 인증 옵션
3. 역할 기반 접근 제어
4. 속도 제한 및 할당량 관리
5. 세션 관리
6. 로깅 및 감사
```

#### API 응답 표준화
```
/generate FastAPI API 응답을 표준화하는 유틸리티를 구현해줘.
요구사항:
1. 표준 응답 형식 정의
2. 오류 응답 처리
3. 페이지네이션 메타데이터 포함
4. 디버그 정보 관리 (개발 환경에서만)
5. 데이터 변환 및 직렬화 헬퍼
6. 국제화 및 현지화 지원
```

## 9. AI 통합 관련 프롬프트

### 9.1 Cursor AI 및 Codex CLI API 통합

#### Cursor AI 및 Codex CLI API 클라이언트
```
/generate Anthropic의 Cursor AI 및 Codex CLI API를 위한 클라이언트 클래스를 구현해줘.
요구사항:
1. API 연결 및 인증 관리
2. 비동기 요청 지원
3. 다양한 요청 형식 지원 (텍스트, JSON 등)
4. 응답 파싱 및 처리
5. 오류 처리 및 재시도 메커니즘
6. 요청 로깅 및 추적
7. 모델 및 매개변수 구성 관리
```

#### 프롬프트 템플릿 시스템
```
/generate LLM 프롬프트 템플릿 시스템을 구현해줘.
요구사항:
1. 템플릿 정의 및 로드
2. 변수 치환 지원
3. 중첩 템플릿 및 조건부 로직
4. 템플릿 검증
5. 사용 예제 포함
6. 템플릿 버전 관리
7. 템플릿 성능 추적
```

### 9.2 RAG 통합

#### RAG 엔진
```
/generate 검색 증강 생성(RAG) 엔진을 구현해줘.
요구사항:
1. 쿼리 처리 및 재작성
2. 관련 문서 검색
3. 컨텍스트 구성 및 최적화
4. LLM 프롬프트 구성
5. 응답 생성 및 후처리
6. 응답 인용 및 출처 추적
7. 피드백 기반 개선 메커니즘
```

#### 질의응답 시스템
```
/generate 문서 기반 질의응답 시스템을 구현해줘.
요구사항:
1. 자연어 질문 처리
2. 질문 유형 분류
3. 관련 문서 검색 및 랭킹
4. 답변 생성 및 검증
5. 불확실성 처리 및 표시
6. 후속 질문 처리
7. 대화 컨텍스트 관리
```

## 10. 개발 지원 관련 프롬프트

### 10.1 테스트 및 디버깅

#### 단위 테스트 생성
```
/test 다음 클래스에 대한 단위 테스트를 작성해줘.
요구사항:
1. pytest 프레임워크 사용
2. 모든 퍼블릭 메서드 테스트
3. 경계 조건 및 예외 케이스 테스트
4. mock 객체 사용 (외부 의존성)
5. 테스트 픽스처 설정
6. 매개변수화된 테스트
7. 코드 커버리지 최적화
```

#### 디버깅 및 로깅
```
/generate 효과적인 로깅 및 디버깅을 위한 유틸리티를 구현해줘.
요구사항:
1. 구조화된 로깅 지원
2. 로그 레벨 관리
3. 컨텍스트 정보 포함
4. 로그 로테이션 및 보존 정책
5. 성능 측정 및 프로파일링
6. 예외 추적 및 보고
7. 디버그 모드 및 트레이스 기능
```

### 10.2 배포 및 유지보수

#### 설정 관리
```
/generate 구성 관리 시스템을 구현해줘.
요구사항:
1. 다양한 구성 소스 지원 (YAML, JSON, 환경 변수)
2. 환경별 구성 관리 (개발, 테스트, 프로덕션)
3. 민감한 정보 보호
4. 구성 유효성 검사
5. 기본값 및 스키마 정의
6. 동적 구성 업데이트
7. 구성 변경 로깅
```

#### 프로젝트 모니터링
```
/generate 시스템 모니터링 및 알림 모듈을 구현해줘.
요구사항:
1. 시스템 상태 및 성능 모니터링
2. 리소스 사용량 추적
3. 오류 및 예외 모니터링
4. 기능적 모니터링
5. 알림 시스템 (이메일, Slack 등)
6. 대시보드 데이터 생성
7. 상태 이력 및 추세 분석
```

## 부록: 복잡한 프롬프트 예시

### A.1 온톨로지 관리 시스템 전체 구현

```
/generate 온톨로지 관리 시스템의 핵심 구성요소를 구현해줘.
시스템은 다음 모듈로 구성되어야 해:

1. Neo4jConnector (atoms/neo4j_connector.py)
   - Neo4j 데이터베이스 연결 관리
   - 세션 및 트랜잭션 관리
   - 기본 CRUD 작업 지원

2. OntologySchema (molecules/ontology_schema.py)
   - 객체 타입 및 속성 정의
   - 관계 타입 및 제약 조건 정의
   - 스키마 유효성 검사

3. OntologyManager (molecules/ontology_manager.py)
   - 객체 및 관계 인스턴스 관리
   - 온톨로지 쿼리 및 탐색
   - 온톨로지 가져오기/내보내기

4. OntologyService (tools/organisms/ontology_service.py)
   - 고수준 온톨로지 관리 API
   - 비즈니스 로직 및 워크플로우
   - 다른 시스템과의 통합

각 모듈은 다음 원칙을 따라야 해:
- 명확한 책임 분리
- 적절한 오류 처리 및 로깅
- 철저한 문서화
- 테스트 가능한 설계
- 설정 주입 (하드코딩 없음)

모든 클래스와 함수에는 타입 힌트와 문서 문자열을 포함해야 하고,
PEP 8 스타일 가이드를 준수해야 해.
```

### A.2 RAG 시스템 전체 구현

```
/generate RAG(Retrieval Augmented Generation) 시스템의 핵심 구성요소를 구현해줘.
시스템은 다음 모듈로 구성되어야 해:

1. DocumentProcessor (molecules/document_processor.py)
   - 문서 청크 분할
   - 텍스트 추출 및 정규화
   - 메타데이터 관리

2. EmbeddingGenerator (molecules/embedding_generator.py)
   - sentence-transformers 모델 로드 및 관리
   - 임베딩 생성 및 정규화
   - 배치 처리 및 캐싱

3. VectorStore (molecules/vector_store.py)
   - ChromaDB 연결 및 관리
   - 임베딩 저장 및 검색
   - 메타데이터 필터링

4. RAGEngine (tools/organisms/rag_engine.py)
   - 쿼리 처리 및 최적화
   - 관련 문서 검색
   - Cursor AI 및 Codex CLI API 연동
   - 응답 생성 및 인용

각 모듈은 다음 원칙을 따라야 해:
- 확장성 있는 설계
- 성능 최적화
- 철저한 오류 처리
- 구성 가능한 파라미터
- 자세한 로깅

특히 다음 기능을 구현해야 해:
- 다양한 임베딩 모델 지원
- 효과적인 컨텍스트 선택 전략
- 메모리 효율적인 대용량 문서 처리
- 응답 생성 시 출처 추적 및 인용
```

---

문서 버전: 1.0  
최종 업데이트: 2025-05-18
